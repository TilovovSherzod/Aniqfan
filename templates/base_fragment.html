<!doctype html>
{% load static %}
{% load group_tags %}
<html lang="uz">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ title|default:"ANIQ QISHLOQ XO'JALIGI" }}</title>
    {# Google font + Bootstrap for quick, modern UI #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <style>
      /* small overrides to make bootstrap + dark theme play nicely */
      body { font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
      .site-header { padding: 1rem 0; }
      .main-nav a { color: #dbeafe; margin-right: 12px; text-decoration: none; }
    </style>
  </head>
  <body class="site-bg-image bg-dark text-light">
    <canvas id="bg-network" class="bg-network-canvas" aria-hidden="true"></canvas>
    <header class="site-header border-bottom border-secondary">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-3 brand">
          <img src="{% static 'img/LOGO.png' %}" alt="TIQXMMI" class="logo" />
          <div class="brand-text">
            <div class="univ text-muted small">Oliy ta'lim muassasasi</div>
            <h1 class="h5 mb-0">ANIQ QISHLOQ XO'JALIGI</h1>
          </div>
        </div>

        <!-- Primary navigation: horizontal on large screens, collapsible on small -->
        <nav class="navbar navbar-expand-lg navbar-dark p-0 w-auto">
          <div class="container-fluid p-0">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNavbar">
              <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
                <li class="nav-item"><a class="nav-link text-light" href="/">Bosh sahifa</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:guides_list' %}">O'quv qo'llanma</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:presentations_list' %}">Tayanch iboralar</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:topics_list' %}">Mavzular</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:videos_list' %}">Video darslar</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:practicals_list' %}">Amaliy mashg'ulot</a></li>
                <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:tests_list' %}">Test</a></li>
                {% if not user.is_authenticated %}
                  <li class="nav-item"><a class="nav-link text-light" href="{% url 'core:signup' %}">Ro'yxatdan o'tish</a></li>
                  <li class="nav-item"><a class="nav-link text-light" href="{% url 'login' %}">Kirish</a></li>
                {% else %}
                  {% if user.is_superuser or user.is_staff or user|has_group:'teacher' %}
                    <li class="nav-item"><a class="nav-link btn btn-sm btn-warning text-dark ms-lg-2" href="{% url 'core:teacher_dashboard' %}">O'qituvchi paneli</a></li>
                  {% endif %}
                  <li class="nav-item"><a class="nav-link text-light" href="{% url 'logout' %}">Chiqish ({{ user.username }})</a></li>
                {% endif %}
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <main class="content py-4">
      <div class="container">
        {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="site-footer mt-5 py-4 border-top border-secondary">
      <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
        <div class="text-muted small">&copy; 2026 — Muhandislik kompyuter grafikasi</div>
  <div class="text-muted small mt-3 mt-md-0">Ma'lumot uchun muallif oynasini sahifa pastida tekshiring.</div>
      </div>
    </footer>

    <!-- Bottom authors panel: stacked list of authors (fixed, dismissible) -->
    <div id="authorsPanel" class="authors-panel" aria-live="polite">
      <button type="button" class="close-btn" aria-label="Yopish" onclick="document.getElementById('authorsPanel').style.display='none'">&times;</button>

      <div class="authors-title fw-semibold">Muallif</div>

      <div class="author">
        <img src="{% static 'img/author2.jpg' %}" class="author-photo" alt="Muallif 2"/>
        <div class="author-info">
          <div class="name fw-semibold">Astanaqulov Komil Dulliyevich</div>
          <div class="author-details">
            <div class="author-detail">
              <span class="author-label">Kafedra:</span>
              <span class="author-value">Qishloq xo‘jaligi texnika va texnologiyalari</span>
            </div>
            <div class="author-detail">
              <span class="author-label">Ilmiy daraja, unvon:</span>
              <span class="author-value">Texnika fanlari doktori, professor</span>
            </div>
            <div class="author-detail">
              <span class="author-label">Telefon:</span>
              <span class="author-value">+99897 130 45 74</span>
            </div>
            <div class="author-detail">
              <span class="author-label">E-mail:</span>
              <span class="author-value">k.astanakulov@tiiame.uz</span>
            </div>
          </div>
        </div>
      </div>

      <div class="author">
        <img src="{% static 'img/author1.jpg' %}" class="author-photo" alt="Muallif 1"/>
        <div class="author-info">
          <div class="name fw-semibold">Fozilov G‘olibjon G‘ulomjonovich</div>
          <div class="author-details">
            <div class="author-detail">
              <span class="author-label">Kafedra:</span>
              <span class="author-value">Qishloq xo‘jaligi texnika va texnologiyalari</span>
            </div>
            <div class="author-detail">
              <span class="author-label">Ilmiy daraja, unvon:</span>
              <span class="author-value">Texnika fanlari bo‘yicha falsafa doktori (PhD), katta o‘qituvchi</span>
            </div>
            <div class="author-detail">
              <span class="author-label">Telefon:</span>
              <span class="author-value">+99899 402 99 88</span>
            </div>
            <div class="author-detail">
              <span class="author-label">E-mail:</span>
              <span class="author-value">g_fozilov@tiiame.uz</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
      // Fallback logo loader: if LOGO.png fails to load, replace with tiqxmmi.png
      (function(){
        try{
          var logo = document.querySelector('img.logo');
          if(logo){
            logo.addEventListener('error', function(){ this.onerror=null; this.src = "{% static 'img/tiqxmmi.png' %}"; });
          }
        }catch(e){ /* ignore in older browsers */ }
      })();
    </script>
  </body>
  </html>
